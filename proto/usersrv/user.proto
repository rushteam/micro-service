syntax = "proto3";

package usersrv;

service UserService {
    //密码登陆/验证码登陆/第三方权限登陆
    rpc Login(LoginReq) returns (AuthRsp) {}
    //创建用户
    // rpc Register(RegisterReq) returns (AuthRsp) {}
    //绑定用户
    rpc Bind(BindReq) returns (UserRsp) {}
    // //解绑用户
    rpc Unbind(UnbindReq) returns (UserRsp) {}
    //用户信息
    rpc User(AuthRsp) returns (UserRsp) {}
    //更新用户信息
    rpc Update(UpdateReq) returns (UserRsp) {}
}

message LoginReq {
    string type = 1; //qq/wx/weibo/username_pwd/phone_pwd/email_pwd/phone_sms/
    string login = 2; //openid/phone/email/username
    string password = 3;//access_token/pasword/captcha
    map<string,string> fileds = 4;
}
message AuthRsp{
    string token = 1;
    int64 uid = 2;
}
message UserReq{
    string token = 1;
}
//user
message UerRsp {
    int64 uid = 1;
    string nickname = 2;
    string firstname = 3;
    string lastname = 4;
    string gender = 5;
    string avatar = 6;
    string updated_at = 7;
    string created_at = 8;
}
message UserRsp {
    int64 uid = 1;
    string nickname = 2;
    string firstname = 3;
    string lastname = 4;
    string gender = 5;
    string avatar = 6;
    string updated_at = 7;
    string created_at = 8;
}

// //register user
// message RegisterReq {
//     LoginReq login = 1;
//     string nickname = 2;
//     string firstname = 3;
//     string lastname = 4;
//     string gender = 5;
//     string avatar = 6;
//     // repeated LoginReq login_list = 1;
// }
message BindReq {
    string token = 1;
    LoginReq login = 2;
}
message UnbindReq {
    string token = 1;
    string type = 2;
}
message UpdateReq {
    string token = 1;
    map<string,string> fileds = 2;
}